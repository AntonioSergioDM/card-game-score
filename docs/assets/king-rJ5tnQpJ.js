import"./theme-BWL1am71.js";import{$ as c,c as d}from"./common-BlY3ihj5.js";const B=(function(){let f,p,g;const n=["vazas","copas","homens","mulheres","king","duasUltimas"],m={vazas:{multiplier:20,max:13},copas:{multiplier:20,max:13},homens:{multiplier:30,max:8},mulheres:{multiplier:50,max:4},king:{multiplier:160,max:1},duasUltimas:{multiplier:90,max:2},festa:{max:13,multiplier:25,positive:!0},festaNulos:{max:13,multiplier:-75,start:325,positive:!0}},u=4;let a=0;const $=()=>{d.init(),f=c("#newScore"),p=c("#board"),g=c("#undoBtn"),x()},x=()=>{setInterval(S,100),f.on("click",I),g.on("click",y),c("#calculateBtn, #calculateBtnNulos").on("click",b)},b=l=>{let t={};a<n.length?t=m[n[a]]:c(l.target).data("festa-nulos")?t=m.festaNulos:t=m.festa;const s=d.getScore();let i=0;for(let e=1;e<=u;e++){const r=c("#input_"+e);let o=+r.val()||0;r.closest(".input").removeClass("input--error"),Math.abs(o)<=t.max?o=Math.abs(o)*t.multiplier+(t.start||0):(o-(t.start||0))%t.multiplier!==0&&(r.closest(".input").addClass("input--error"),o=0),i+=o,s[`score${e}`]=s[`score${e}`]||h(),a<n.length?s[`score${e}`][n[a]]=r:s[`score${e}`][`festa${a-n.length+1}`]=o,s[`score${e}`][n[a]]=o}i===t.max*t.multiplier+(t.start||0)*4&&(s.currentTurn=a=a+1,d.save(s))},y=()=>{const l=d.getScore();l.currentTurn=a=Math.max(a-1,0),d.save(l)},I=l=>{const t=+c(l.target).closest("[data-player]").data("player");t&&c("#input_"+t).trigger("focus").trigger("select")},S=()=>{if(!d.hasChanges())return;p.html(T());const l=p.find(".scroll"),t=c("#input_1");t.length&&(l.scrollTop(t.offset().top),t.trigger("focus").trigger("select")),a>=n.length+u?l.scrollTop(l.find("td").last().offset().top):a>=n.length?c("#calculateBtnNulos").show():c("#calculateBtnNulos").hide()},T=()=>{const l=d.getScore();a=l.currentTurn||a;const t=n.length;let s={},i=k(l);i+='<tbody class="scroll">';for(let e=0;e<t;e++){i+=`<tr>
                        <td>${n[e]}</td>`;for(let r=1;r<=u;r++){s[r]||(s[r]={});const o=l[`score${r}`]||h();s[r].negative=(s[r]?.negative||0)+o[n[e]],s[r].positive=(s[r]?.positive||0)+(o[`festa${e+1}`]||0),i+=v(r,e,o[n[e]],-s[r].negative),i+=v(r,e+t,o[`festa${e+1}`],s[r].positive)}i+="</tr>"}i+='<tr><td class="h-4"></td>';for(let e=1;e<=u;e++)i+='<td></td><td class="relative">',a>=n.length+u&&(i+=`<div class="total total--final">${s[e].positive-s[e].negative}</div>`),i+="</td>";return i+="</tr>",i+="</tbody>",i},k=l=>{let t="<thead><tr><td></td>";for(let s=1;s<=u;s++)t+=`<td colspan="2">
                        <div class="player" data-renamable="${s}">
                            ${l[`player${s}`]||["I","II","III","IV","V"][s-1]}
                        </div>`,t+="</td>";return t+="</tr></thead>",t},v=(l,t,s,i)=>{let e=`<td class="relative text-center" data-player="${l}" data-turn="${t}">`;return t<a?(e+=s||"---",(t===n.length-1||t===n.length-1+u)&&(e+=`<div class="total">${i}</div>`)):t===a&&a<n.length+u&&(e+=`
                <div class="input text-center">
                    <input type="number" id="input_${l}" value="${s||""}">
                </div>`),e+="</td>",e},h=()=>({vazas:0,copas:0,homens:0,mulheres:0,king:0,duasUltimas:0,festa1:0,festa2:0,festa3:0,festa4:0});return{init:$}})();c(()=>{B.init()});
